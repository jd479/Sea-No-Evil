{"version":3,"sources":["webpack:///webpack/bootstrap 092da73dbcb642d42836","webpack:///./lib/sea_no_evil.js","webpack:///./lib/game.js","webpack:///./lib/ai_fish.js","webpack:///./lib/moving_fish.js","webpack:///./lib/util.js","webpack:///./lib/player_fish.js","webpack:///./~/vanilla-modal/dist/index.js","webpack:///./lib/game_view.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACZD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAiC,WAAW;AAC5C;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAiC;AACjC,mCAAkC;AAClC,kCAAiC;AACjC,mCAAkC;AAClC,kCAAiC;AACjC,kBAAiB;;AAEjB;AACA,oCAAmC,WAAW;AAC9C;AACA;;AAEA;AACA;AACA;AACA,oCAAmC;AACnC;AACA,0CAAyC;AACzC,MAAK;AACL,oCAAmC;AACnC,gDAA+C;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAuC,aAAa;AACpD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,oBAAmB,0BAA0B;AAC7C,0BAAyB,sBAAsB;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,WAAW,UAAU,WAAW;AAChE;AACA;AACA,oCAAmC,wCAAwC;AAC3E;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACvLA;AACA;AACA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0CAAyC;AACzC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACzCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACrDA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;ACZA;AACA;AACA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;AAClB;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClHA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA,gBAAe,OAAO;AACtB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,gBAAe,OAAO;AACtB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,IAAG;;AAEH;AACA;AACA,EAAC;;;;;;;ACtWD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAoB,mBAAmB,EAAE;AACzC,MAAK;AACL,qBAAoB,gBAAgB,EAAE;AACtC,qBAAoB,gBAAgB,EAAE;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 092da73dbcb642d42836\n **/","const Game = require(\"./game\");\nconst GameView = require(\"./game_view\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const canvas = document.getElementById(\"canvas\");\n  canvas.width = Game.DIM_X;\n  canvas.height = Game.DIM_Y;\n\n  const ctx = canvas.getContext(\"2d\");\n  const game = new Game();\n  const gameView = new GameView(game, ctx);\n  gameView.start();\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/sea_no_evil.js\n ** module id = 0\n ** module chunks = 0\n **/","const AIFish = require('./ai_fish');\nconst Util = require('./util');\nconst PlayerFish = require('./player_fish');\nconst VanillaModal = require('vanilla-modal');\n\nclass Game {\n  constructor() {\n    this.fishes = [];\n    this.player = [];\n    this.score = 0;\n    this.populateFish();\n    this.lives = 3;\n  }\n\n  isOver() {\n    if (this.lives < 1) {\n      if (confirm(`You earned: ${this.score} points, want to play again?`)) {\n        this.restart();\n      } else {\n        this.remove(this.player[0]);\n      }\n    }\n  }\n\n  restart() {\n    const player = this.player[0];\n    this.lives = 3;\n    this.score = 0;\n    player.pos = [Game.DIM_X /2, Game.DIM_Y / 2];\n    player.brake();\n    player.width = 50;\n    player.height = 25;\n    this.fishes = [];\n    this.populateFish();\n  }\n\n  populateFish() {\n    this.fishes.push(new AIFish({ game: this,\n       width: 40, pos: [100, 400]}));\n    this.fishes.push(new AIFish({ game: this,\n       width: 45, pos: [800, 250]}));\n    this.fishes.push(new AIFish({ game: this,\n       width: 48}));\n\n    while (this.fishes.length < Game.NUM_FISH) {\n      this.fishes.push(new AIFish({game: this}));\n    }\n  }\n\n  respawnFish() {\n    const player = this.player[0];\n    if (this.playerIsSmallest()) {\n      this.fishes.push(new AIFish({game: this,\n      width: player.width * .7,\n        pos: this.trulyRandomPosition() }));\n    } else {\n      this.fishes.push(new AIFish({ game: this,\n        pos: [900, Game.DIM_Y * Math.random()]}));\n    }\n  }\n\n  playerIsSmallest() {\n    // ensure there is always at least one fish smaller\n    // than the player\n    const player = this.player[0];\n    let playerIsSmallest = true;\n    this.fishes.forEach((fish) => {\n      if (player.isBiggerThan(fish)) {\n        playerIsSmallest = false;\n      }\n    });\n    return playerIsSmallest;\n  }\n\n  semiRandomPosition() {\n    let x = Game.DIM_X * Math.random();\n    let y = Game.DIM_Y * Math.random();\n    while (y < 400 && y > 200 ){\n      y = Game.DIM_Y * Math.random();\n    }\n    while (x < 800 && x > 200) {\n      x = Game.DIM_X * Math.random();\n    }\n    return [x, y];\n  }\n\n  trulyRandomPosition() {\n    let x = Game.DIM_X * Math.random();\n    let y = Game.DIM_Y * Math.random();\n    return [x, y];\n  }\n\n  addPlayer() {\n    const playerFish = new PlayerFish({ game: this });\n    this.player.push(playerFish);\n    return playerFish;\n  }\n\n  allFishes() {\n    return [].concat(this.player, this.fishes);\n  }\n\n  isOut(pos) {\n    return (pos[0] < 0) || (pos[1] < 0) ||\n      (pos[0] > Game.DIM_X) || (pos[1] > Game.DIM_Y);\n  }\n\n  moveFishes(time) {\n    this.allFishes().forEach((fish) => {\n\n      fish.move(time);\n    });\n  }\n\n  draw(context) {\n    var bg = new Image();\n      bg.onload = function() {\n        var pattern = context.createPattern(bg, 'repeat');\n\n        context.rect(0, 0, Game.DIM_X, Game.DIM_Y);\n        context.fillStyle = pattern;\n        context.fill();\n      };\n    bg.src = \"images/ocean.jpg\";\n    context.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n    context.fillStyle = bg;\n    context.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n    this.allFishes().forEach((fish) => {\n      fish.draw(context);\n    });\n  }\n\n  checkCollisions() {\n    const allFishes = this.allFishes();\n    for (let i = 0; i < allFishes.length - 1; i++) {\n      for (let j = i + 1; j < allFishes.length; j++) {\n        const fish1 = allFishes[i];\n        const fish2 = allFishes[j];\n\n        if (fish1.isCollidedWith(fish2)) {\n          const collision = fish1.collideWith(fish2);\n          if (collision) return;\n        }\n      }\n    }\n  }\n\n  step(time) {\n    let score = document.getElementById(\"score\");\n    score.innerHTML = `lives: ${this.lives} score: ${this.score}`;\n    const player = this.player[0];\n    if (player && this.playerIsSmallest()) {\n      this.fishes.push(new AIFish({ game: this, width: player.width * 0.8 }));\n    }\n    this.moveFishes(time);\n    this.checkCollisions();\n    if (key.getPressedKeyCodes().length === 0 && player) {\n\n      player.decelerate();\n    }\n  }\n\n  wrap(pos) {\n    return [\n      Util.wrap(pos[0], Game.DIM_X + 100), Util.wrap(pos[1], Game.DIM_Y)\n    ];\n  }\n\n  remove(fish) {\n    if (fish instanceof AIFish) {\n      this.fishes.splice(this.fishes.indexOf(fish), 1);\n    } else if (fish instanceof PlayerFish) {\n      this.player.shift();\n    }\n  }\n\n}\n\nGame.DIM_X = 1000;\nGame.DIM_Y = 600;\nGame.NUM_FISH = 10;\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 1\n ** module chunks = 0\n **/","const MovingFish = require('./moving_fish');\nconst canvas = document.getElementById(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nclass AIFish extends MovingFish {\n  constructor( options = {} ) {\n    const dir = Math.round(Math.random()) * 2 - 1;\n    options.width = options.width || 275 * Math.random() + 25;\n    options.vel = [150 / options.width * dir, 0];\n\n    const image = options.image || new Image();\n\n    image.src = \"images/default_fish.png\";\n\n    if (options.width < 50) {\n      image.src = \"images/goldfish.png\";\n    }\n\n    if (options.width > 200) {\n      image.src = \"images/sperm_whale.png\";\n      options.height = options.width / 2;\n      options.width = options.width * 1.4;\n    }\n\n    image.onload = () => {\n      ctx.drawImage(image, 900 * Math.random()\n      , 600 * Math.random());\n    };\n\n    if (dir !== 1) {\n      image.src = image.src.slice(0, -4); //remove tag\n      image.src += `_flipped.png`;\n    }\n\n    options.pos = options.pos || options.game.semiRandomPosition();\n    options.image = image;\n    super(options);\n  }\n\n}\n\nmodule.exports = AIFish;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/ai_fish.js\n ** module id = 2\n ** module chunks = 0\n **/","const canvas = document.getElementById(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nclass MovingFish {\n  constructor(options) {\n    this.pos = options.pos;\n    this.vel = options.vel;\n    this.width = options.width;\n    this.height = options.height || options.width / 2;\n    this.image = options.image;\n    this.game = options.game;\n  }\n\n  move(time) {\n    const velocityScale = time / NORMAL_FRAME_TIME_DELTA,\n        offsetX = this.vel[0] * velocityScale,\n        offsetY = this.vel[1] * velocityScale;\n\n    this.pos = [this.pos[0] + offsetX, this.pos[1] + offsetY];\n\n    if (this.game.isOut(this.pos)) {\n      this.pos = this.game.wrap(this.pos);\n    }\n\n  }\n\n  draw(context) {\n    context.drawImage(this.image,\n       this.pos[0], this.pos[1],\n        this.width, this.height);\n  }\n\n  isCollidedWith(otherFish) {\n    if (this.pos[0] < otherFish.pos[0] + otherFish.width &&\n      this.pos[0] + this.width > otherFish.pos[0] &&\n      this.pos[1] < otherFish.pos[1] + otherFish.height &&\n      this.height + this.pos[1] > otherFish.pos[1]) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  collideWith(otherFish) {\n  }\n\n  isBiggerThan(otherFish) {\n    return this.width > otherFish.width;\n  }\n\n}\nconst NORMAL_FRAME_TIME_DELTA = 1000/90;\n\nmodule.exports = MovingFish;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/moving_fish.js\n ** module id = 3\n ** module chunks = 0\n **/","const Util = {\n  wrap (coord, edge) {\n    if (coord < 0) {\n      return edge - (coord % edge);\n    } else if (coord > edge) {\n      return coord % edge;\n    } else {\n      return coord;\n    }\n  }\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 4\n ** module chunks = 0\n **/","const MovingFish = require('./moving_fish');\nconst canvas = document.getElementById(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nclass PlayerFish extends MovingFish {\n  constructor( options = {} ) {\n    const shark = new Image();\n    shark.src = \"images/shark.png\";\n    shark.onload = () => {\n      ctx.drawImage(shark, 450, 300);\n    };\n    options.image = shark;\n    options.pos = [500,\n       300];\n    options.width = 50;\n    options.vel = [0, 0];\n    super(options);\n\n    this.state = { isInvicible: false, color: 1 };\n  }\n\n  collideWith(otherFish) {\n\n      if (this.isBiggerThan(otherFish)) {\n\n        this.width += otherFish.width * .15;\n        this.height = this.width / 2;\n        this.game.remove(otherFish);\n        this.game.respawnFish();\n        this.game.score += Math.floor(otherFish.width * .15);\n        if (this.width > 1000) {\n          alert('500 bonus points! Bonus life and rebirth!');\n          this.game.score += 500;\n          this.width = 50;\n          this.height = 25;\n          this.pos = [500, 300];\n          this.brake();\n          this.game.lives++;\n        }\n\n      } else {\n        if (this.state.isInvicible) {\n          return;\n        } else {\n        const munch = new Audio('./sound/chomp.wav');\n        munch.play();\n        this.respawn();\n        this.game.lives--;\n        this.game.isOver();\n        if (this.game.lives) {\n          const invincible = new Audio('./sound/invincible.mp3');\n          invincible.play();\n        }\n      }\n    }\n  }\n\n  respawn() {\n    this.width = this.width * .75;\n    this.height = this.width / 2;\n    this.pos = [500, 300];\n    this.brake();\n    this.state.isInvicible = true;\n    window.setTimeout(() => {\n      this.state.isInvicible = false;\n    }, 6000);\n  }\n\n  swim(stroke) {\n    if (stroke[0]) {\n      this.vel[0] = stroke[0];\n    }\n    if (stroke[1]) {\n      this.vel[1] = stroke[1];\n    }\n  }\n\n  brake() {\n    this.vel = [0, 0];\n  }\n\n  draw(context) {\n    this.image = new Image();\n    if (this.state.isInvicible) {\n      if (this.vel[0] < 0) {\n        this.image.src = \"images/super_shark_flipped.png\";\n      } else {\n        this.image.src = \"images/super_shark.png\";\n      }\n\n    } else {\n      if (this.vel[0] < 0) {\n        this.image.src = \"images/shark_flipped.png\";\n      } else {\n        this.image.src = \"images/shark.png\";\n      }\n    }\n    context.drawImage(this.image,\n       this.pos[0], this.pos[1],\n        this.width, this.height);\n  }\n\n  decelerate() {\n    this.vel[0] = this.vel[0] * .88;\n    this.vel[1] = this.vel[1] * .88;\n    if (Math.abs(this.vel[0]) < 0.5) {\n      this.vel[0] *= .1;\n    }\n    if (Math.abs(this.vel[1]) < 0.5) {\n      this.vel[1]=0;\n    }\n  }\n}\n\nmodule.exports = PlayerFish;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/player_fish.js\n ** module id = 5\n ** module chunks = 0\n **/","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define('VanillaModal', ['module', 'exports'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, mod.exports);\n    global.VanillaModal = mod.exports;\n  }\n})(this, function (module, exports) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var VanillaModal = function () {\n\n    /**\n     * @param {Object} [userSettings]\n     */\n\n    function VanillaModal(userSettings) {\n      _classCallCheck(this, VanillaModal);\n\n      this.$$ = {\n        modal: '.modal',\n        modalInner: '.modal-inner',\n        modalContent: '.modal-content',\n        open: '[rel=\"modal:open\"]',\n        close: '[rel=\"modal:close\"]',\n        page: 'body',\n        class: 'modal-visible',\n        loadClass: 'vanilla-modal',\n        clickOutside: true,\n        closeKeys: [27],\n        transitions: true,\n        transitionEnd: null,\n        onBeforeOpen: null,\n        onBeforeClose: null,\n        onOpen: null,\n        onClose: null\n      };\n\n      this._applyUserSettings(userSettings);\n      this.error = false;\n      this.isOpen = false;\n      this.current = null;\n      this.open = this._open.bind(this);\n      this.close = this._close.bind(this);\n      this.$$.transitionEnd = this._transitionEndVendorSniff();\n      this.$ = this._setupDomNodes();\n\n      if (!this.error) {\n        this._addLoadedCssClass();\n        this._events().add();\n      } else {\n        console.error('Please fix errors before proceeding.');\n      }\n    }\n\n    /**\n     * @param {Object} userSettings\n     */\n\n\n    _createClass(VanillaModal, [{\n      key: '_applyUserSettings',\n      value: function _applyUserSettings(userSettings) {\n        if ((typeof userSettings === 'undefined' ? 'undefined' : _typeof(userSettings)) === 'object') {\n          for (var i in userSettings) {\n            if (userSettings.hasOwnProperty(i)) {\n              this.$$[i] = userSettings[i];\n            }\n          }\n        }\n      }\n    }, {\n      key: '_transitionEndVendorSniff',\n      value: function _transitionEndVendorSniff() {\n        if (this.$$.transitions === false) return;\n        var el = document.createElement('div');\n        var transitions = {\n          'transition': 'transitionend',\n          'OTransition': 'otransitionend',\n          'MozTransition': 'transitionend',\n          'WebkitTransition': 'webkitTransitionEnd'\n        };\n        for (var i in transitions) {\n          if (transitions.hasOwnProperty(i) && el.style[i] !== undefined) {\n            return transitions[i];\n          }\n        }\n      }\n    }, {\n      key: '_getNode',\n      value: function _getNode(selector, parent) {\n        var targetNode = parent || document;\n        var node = targetNode.querySelector(selector);\n        if (!node) {\n          this.error = true;\n          return console.error(selector + ' not found in document.');\n        }\n        return node;\n      }\n    }, {\n      key: '_setupDomNodes',\n      value: function _setupDomNodes() {\n        var $ = {};\n        $.modal = this._getNode(this.$$.modal);\n        $.page = this._getNode(this.$$.page);\n        $.modalInner = this._getNode(this.$$.modalInner, this.modal);\n        $.modalContent = this._getNode(this.$$.modalContent, this.modal);\n        return $;\n      }\n    }, {\n      key: '_addLoadedCssClass',\n      value: function _addLoadedCssClass() {\n        this._addClass(this.$.page, this.$$.loadClass);\n      }\n    }, {\n      key: '_addClass',\n      value: function _addClass(el, className) {\n        if (el instanceof HTMLElement === false) return;\n        var cssClasses = el.className.split(' ');\n        if (cssClasses.indexOf(className) === -1) {\n          cssClasses.push(className);\n        }\n        el.className = cssClasses.join(' ');\n      }\n    }, {\n      key: '_removeClass',\n      value: function _removeClass(el, className) {\n        if (el instanceof HTMLElement === false) return;\n        var cssClasses = el.className.split(' ');\n        if (cssClasses.indexOf(className) > -1) {\n          cssClasses.splice(cssClasses.indexOf(className), 1);\n        }\n        el.className = cssClasses.join(' ');\n      }\n    }, {\n      key: '_setOpenId',\n      value: function _setOpenId() {\n        var id = this.current.id || 'anonymous';\n        this.$.page.setAttribute('data-current-modal', id);\n      }\n    }, {\n      key: '_removeOpenId',\n      value: function _removeOpenId() {\n        this.$.page.removeAttribute('data-current-modal');\n      }\n    }, {\n      key: '_getElementContext',\n      value: function _getElementContext(e) {\n        if (e && typeof e.hash === 'string') {\n          return document.querySelector(e.hash);\n        } else if (typeof e === 'string') {\n          return document.querySelector(e);\n        } else {\n          return console.error('No selector supplied to open()');\n        }\n      }\n    }, {\n      key: '_open',\n      value: function _open(matches, e) {\n        this._releaseNode();\n        this.current = this._getElementContext(matches);\n        if (this.current instanceof HTMLElement === false) return console.error('VanillaModal target must exist on page.');\n        if (typeof this.$$.onBeforeOpen === 'function') this.$$.onBeforeOpen.call(this, e);\n        this._captureNode();\n        this._addClass(this.$.page, this.$$.class);\n        this._setOpenId();\n        this.isOpen = true;\n        if (typeof this.$$.onOpen === 'function') this.$$.onOpen.call(this, e);\n      }\n    }, {\n      key: '_detectTransition',\n      value: function _detectTransition() {\n        var css = window.getComputedStyle(this.$.modal, null);\n        var transitionDuration = ['transitionDuration', 'oTransitionDuration', 'MozTransitionDuration', 'webkitTransitionDuration'];\n        var hasTransition = transitionDuration.filter(function (i) {\n          if (typeof css[i] === 'string' && parseFloat(css[i]) > 0) {\n            return true;\n          }\n        });\n        return hasTransition.length ? true : false;\n      }\n    }, {\n      key: '_close',\n      value: function _close(e) {\n        if (this.isOpen === true) {\n          this.isOpen = false;\n          if (typeof this.$$.onBeforeClose === 'function') this.$$.onBeforeClose.call(this, e);\n          this._removeClass(this.$.page, this.$$.class);\n          var transitions = this._detectTransition();\n          if (this.$$.transitions && this.$$.transitionEnd && transitions) {\n            this._closeModalWithTransition(e);\n          } else {\n            this._closeModal(e);\n          }\n        }\n      }\n    }, {\n      key: '_closeModal',\n      value: function _closeModal(e) {\n        this._removeOpenId(this.$.page);\n        this._releaseNode();\n        this.isOpen = false;\n        this.current = null;\n        if (typeof this.$$.onClose === 'function') this.$$.onClose.call(this, e);\n      }\n    }, {\n      key: '_closeModalWithTransition',\n      value: function _closeModalWithTransition(e) {\n        var _closeTransitionHandler = function () {\n          this.$.modal.removeEventListener(this.$$.transitionEnd, _closeTransitionHandler);\n          this._closeModal(e);\n        }.bind(this);\n        this.$.modal.addEventListener(this.$$.transitionEnd, _closeTransitionHandler);\n      }\n    }, {\n      key: '_captureNode',\n      value: function _captureNode() {\n        if (this.current) {\n          while (this.current.childNodes.length > 0) {\n            this.$.modalContent.appendChild(this.current.childNodes[0]);\n          }\n        }\n      }\n    }, {\n      key: '_releaseNode',\n      value: function _releaseNode() {\n        if (this.current) {\n          while (this.$.modalContent.childNodes.length > 0) {\n            this.current.appendChild(this.$.modalContent.childNodes[0]);\n          }\n        }\n      }\n    }, {\n      key: '_closeKeyHandler',\n      value: function _closeKeyHandler(e) {\n        if (Object.prototype.toString.call(this.$$.closeKeys) !== '[object Array]' || this.$$.closeKeys.length === 0) return;\n        if (this.$$.closeKeys.indexOf(e.which) > -1 && this.isOpen === true) {\n          e.preventDefault();\n          this.close(e);\n        }\n      }\n    }, {\n      key: '_outsideClickHandler',\n      value: function _outsideClickHandler(e) {\n        if (this.$$.clickOutside !== true) return;\n        var node = e.target;\n        while (node && node != document.body) {\n          if (node === this.$.modalInner) return;\n          node = node.parentNode;\n        }\n        this.close(e);\n      }\n    }, {\n      key: '_matches',\n      value: function _matches(e, selector) {\n        var el = e.target;\n        var matches = (el.document || el.ownerDocument).querySelectorAll(selector);\n        for (var i = 0; i < matches.length; i++) {\n          var child = el;\n          while (child && child !== document.body) {\n            if (child === matches[i]) return child;\n            child = child.parentNode;\n          }\n        }\n        return null;\n      }\n    }, {\n      key: '_delegateOpen',\n      value: function _delegateOpen(e) {\n        var matches = this._matches(e, this.$$.open);\n        if (matches) {\n          e.preventDefault();\n          e.delegateTarget = matches;\n          return this.open(matches, e);\n        }\n      }\n    }, {\n      key: '_delegateClose',\n      value: function _delegateClose(e) {\n        if (this._matches(e, this.$$.close)) {\n          e.preventDefault();\n          return this.close(e);\n        }\n      }\n    }, {\n      key: '_events',\n      value: function _events() {\n\n        var _closeKeyHandler = this._closeKeyHandler.bind(this);\n        var _outsideClickHandler = this._outsideClickHandler.bind(this);\n        var _delegateOpen = this._delegateOpen.bind(this);\n        var _delegateClose = this._delegateClose.bind(this);\n\n        var add = function add() {\n          this.$.modal.addEventListener('click', _outsideClickHandler, false);\n          document.addEventListener('keydown', _closeKeyHandler, false);\n          document.addEventListener('click', _delegateOpen, false);\n          document.addEventListener('click', _delegateClose, false);\n        };\n\n        this.destroy = function () {\n          this.close();\n          this.$.modal.removeEventListener('click', _outsideClickHandler);\n          document.removeEventListener('keydown', _closeKeyHandler);\n          document.removeEventListener('click', _delegateOpen);\n          document.removeEventListener('click', _delegateClose);\n        };\n\n        return {\n          add: add.bind(this)\n        };\n      }\n    }]);\n\n    return VanillaModal;\n  }();\n\n  exports.default = VanillaModal;\n  module.exports = exports['default'];\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vanilla-modal/dist/index.js\n ** module id = 6\n ** module chunks = 0\n **/","class GameView {\n  constructor(game, ctx) {\n    this.ctx = ctx;\n    this.game = game;\n    this.player = this.game.addPlayer();\n  }\n\n  start() {\n    this.bindKeyHandler();\n    this.lastTime = 0;\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  animate(time) {\n    const delta = time - this.lastTime;\n    this.game.step(delta);\n    this.game.draw(this.ctx);\n    this.lastTime = time;\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  bindKeyHandler() {\n    const player = this.player;\n    Object.keys(GameView.MOVES).forEach((k) => {\n      let move = GameView.MOVES[k];\n      key(k, () => { player.swim(move); });\n    });\n    key('q', () => { player.brake(); });\n    key('e', () => { player.brake(); });\n  }\n}\n\nGameView.MOVES = {\n  \"w\": [ 0, -2.5],\n  \"a\": [-3.5,  0],\n  \"s\": [ 0, 2.5],\n  \"d\": [ 3.5,  0]\n};\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game_view.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}